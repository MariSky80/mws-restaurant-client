{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/idb/lib/idb.js","resources/js/dbhelper.js","resources/js/restaurant_info.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"bundle_restaurant.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","'use strict';\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      request.onupgradeneeded = function(event) {\n        if (upgradeCallback) {\n          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n        }\n      };\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n","const idb = require('idb');\r\nconst IDB_DB = 'restaurant-db';\r\nconst IDB_RESTAURANTS = 'restaurants';\r\nconst IDB_PENDING_RESTAURANTS = 'pending_restaurants';\r\nconst IDB_REVIEWS = 'reviews';\r\nconst IDB_PENDING_REVIEWS = 'pending_reviews';\r\nlet tagName = '';\r\n\r\n /**\r\n  * @description  Common database helper functions.\r\n  * @constructor\r\n  */\r\nclass DBHelper {\r\n /**\r\n  * @description  Database URL. Change this to restaurants.json file location on your server.\r\n  * @constructor\r\n  */\r\n  static get RESTAURANTS_URL() {\r\n    const port = 1337 // Change this to your server port\r\n    return `http://localhost:${port}/restaurants`;\r\n  }\r\n\r\n  /**\r\n   * @description  Database URL. Change this to restaurants.json file location on your server.\r\n   * @constructor\r\n   */\r\n   static get REVIEWS_URL() {\r\n     const port = 1337 // Change this to your server port\r\n     return `http://localhost:${port}/reviews`;\r\n   }\r\n\r\n\r\n  /**\r\n   * @description  Open database.\r\n   * @constructor\r\n   */\r\n  static openIndexedDB() {\r\n    // If the browser doesn't support service worker,\r\n    // we don't care about having a database\r\n    if (!navigator.serviceWorker) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    this.dbPromise = idb.open(IDB_DB, 2, function (upgradeDb) {\r\n      switch (upgradeDb.oldVersion) {\r\n        case 0:\r\n        case 1:\r\n        case 2:\r\n          const storeRestaurant = upgradeDb.createObjectStore(IDB_RESTAURANTS, {\r\n            keyPath: 'id'\r\n          });\r\n          storeRestaurant.createIndex('by-id', 'id', { unique: true });\r\n\r\n          const storeReviews = upgradeDb.createObjectStore(IDB_REVIEWS, {\r\n            keyPath: 'id'\r\n          });\r\n          storeReviews.createIndex('by-id', 'id', { unique: true });\r\n          storeReviews.createIndex('by-restaurant-id', 'restaurant_id');\r\n\r\n          const pendingRestaurants = upgradeDb.createObjectStore(IDB_PENDING_RESTAURANTS, {\r\n            keyPath: 'id'\r\n          });\r\n          pendingRestaurants.createIndex('by-id', 'id', {unique:true});\r\n\r\n          const pendingReviews = upgradeDb.createObjectStore(IDB_PENDING_REVIEWS, {\r\n            keyPath:'id', autoIncrement:true\r\n          });\r\n          pendingReviews.createIndex('by-id', 'id', {unique:true});\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * @description  Save data restaurant.\r\n   * @constructor\r\n   * @param {object} Object list - Object like restaurant, reveiw, ...\r\n   */\r\n  static storeIndexedDB(table, objects) {\r\n    this.dbPromise.then(function (db) {\r\n      if(!db) return;\r\n\r\n      let tx = db.transaction(table, 'readwrite');\r\n      const store = tx.objectStore(table);\r\n      if (Array.isArray(objects)) {\r\n        objects.forEach(function(object){\r\n          store.put(object);\r\n        });\r\n      } else {\r\n        store.put(objects);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * @description  Get a collection of objects from indexedDB.\r\n   * @constructor\r\n   */\r\n  static getStoredObjects(table) {\r\n    return this.dbPromise.then(function(db) {\r\n      if(!db) return;\r\n      const store = db.transaction(table).objectStore(table);\r\n      return store.getAll();\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * @description  Get object from indexedDB by index\r\n   * @constructor {int} id - Restaurant id\r\n   */\r\n  static getStoredObjectById(table, idx, id) {\r\n    return this.dbPromise.then(function(db) {\r\n      if(!db) return;\r\n\r\n      const store = db.transaction(table).objectStore(table);\r\n      const indexId = store.index(idx);\r\n      return indexId.getAll(id);\r\n    });\r\n  }\r\n\r\n\r\n /**\r\n  * @description  Fetch all restaurants.\r\n  * @constructor\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchRestaurants(callback) {\r\n    fetch(DBHelper.RESTAURANTS_URL)\r\n      .then(response => response.json())\r\n      .then(restaurants => {\r\n        DBHelper.storeIndexedDB(IDB_RESTAURANTS, restaurants);\r\n        callback(null, restaurants);\r\n      })\r\n      .catch(error => {\r\n        DBHelper.getStoredObjects(IDB_RESTAURANTS)\r\n        .then((storedRestaurants) => {\r\n          callback(null, storedRestaurants);\r\n        }).catch(error => {\r\n          callback(error, null);\r\n        })\r\n      });\r\n  }\r\n\r\n\r\n /**\r\n  * @description  Fetch a restaurant by its ID.\r\n  * @constructor\r\n  * @param {int} id - Restaurant identifier.\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchRestaurantById(id, callback) {\r\n    fetch(`${DBHelper.RESTAURANTS_URL}/${id}`)\r\n      .then(response => response.json())\r\n      .then(restaurant => {\r\n        DBHelper.storeIndexedDB(IDB_RESTAURANTS, restaurant);\r\n        callback(null, restaurant);\r\n      })\r\n      .catch(error => {\r\n        DBHelper.getStoredObjectById(IDB_RESTAURANTS, 'by-id' ,id)\r\n        .then((storedRestaurant) => {\r\n          callback(null, storedRestaurant);\r\n        }).catch(error => {\r\n          callback(error, null);\r\n        })\r\n      });\r\n  }\r\n\r\n\r\n /**\r\n  * @description  Fetch restaurants by a cuisine type with proper error handling.\r\n  * @constructor\r\n  * @param {string} cuisine - Neighborhood selected.\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchRestaurantByCuisine(cuisine, callback) {\r\n    // Fetch all restaurants  with proper error handling\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Filter restaurants to have only given cuisine type\r\n        const results = restaurants.filter(r => r.cuisine_type == cuisine);\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n /**\r\n  * @description  Fetch restaurants by a neighborhood with proper error handling.\r\n  * @constructor\r\n  * @param {string} neighborhood - Neighborhood selected.\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchRestaurantByNeighborhood(neighborhood, callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Filter restaurants to have only given neighborhood\r\n        const results = restaurants.filter(r => r.neighborhood == neighborhood);\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n /**\r\n  * @description  Fetch restaurants by a cuisine and a neighborhood with proper error handling.\r\n  * @constructor\r\n  * @param {string} cuisine - Cuisine selected.\r\n  * @param {string} neighborhood - Neighborhood selected.\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        let results = restaurants;\r\n        if (cuisine != 'all') { // filter by cuisine\r\n          results = results.filter(r => r.cuisine_type == cuisine);\r\n        }\r\n        if (neighborhood != 'all') { // filter by neighborhood\r\n          results = results.filter(r => r.neighborhood == neighborhood);\r\n        }\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n /**\r\n  * @description  Fetch all neighborhoods with proper error handling.\r\n  * @constructor\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchNeighborhoods(callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Get all neighborhoods from all restaurants\r\n        const neighborhoods = restaurants.map((v, i) => restaurants[i].neighborhood)\r\n        // Remove duplicates from neighborhoods\r\n        const uniqueNeighborhoods = neighborhoods.filter((v, i) => neighborhoods.indexOf(v) == i)\r\n        callback(null, uniqueNeighborhoods);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n /**\r\n  * @description  Fetch all cuisines with proper error handling.\r\n  * @constructor\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchCuisines(callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Get all cuisines from all restaurants\r\n        const cuisines = restaurants.map((v, i) => restaurants[i].cuisine_type)\r\n        // Remove duplicates from cuisines\r\n        const uniqueCuisines = cuisines.filter((v, i) => cuisines.indexOf(v) == i)\r\n        callback(null, uniqueCuisines);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n  * @description  Fetch all reviews.\r\n  * @constructor\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchReviews(callback) {\r\n    fetch(DBHelper.REVIEWS_URL)\r\n      .then(response => response.json())\r\n      .then(reviews => {\r\n        DBHelper.storeIndexedDB(IDB_REVIEWS, reviews);\r\n        callback(null, reviews);\r\n      })\r\n      .catch(error => {\r\n        DBHelper.getStoredObjects(IDB_REVIEWS)\r\n        .then((storedReviews) => {\r\n          callback(null, storedReviews);\r\n        }).catch(error => {\r\n          callback(error, null);\r\n        })\r\n      });\r\n  }\r\n\r\n\r\n  /**\r\n   * @description  Fetch a review by its ID.\r\n   * @constructor\r\n   * @param {int} id - Reviews identifier.\r\n   * @param {function} callback - Callback function.\r\n   */\r\n   static fetchReviewsById(id, callback) {\r\n     fetch(`${DBHelper.REVIEWS_URL}/${id}`)\r\n       .then(response => response.json())\r\n       .then(review => {\r\n         DBHelper.storeIndexedDB(IDB_REVIEWS, review);\r\n         callback(null, review)\r\n       })\r\n       .catch(error => {\r\n         DBHelper.getStoredObjectById(IDB_REVIEWS, 'by-id', id)\r\n         .then((storedReview) => {\r\n           callback(null, storedReview);\r\n         }).catch(error => {\r\n           callback(error, null);\r\n         })\r\n       });\r\n   }\r\n\r\n\r\n /**\r\n  * @description  Fetch all restaurant reviews by restaurant ID.\r\n  * @constructor\r\n  * @param {int} id - Restaurant identifier.\r\n  * @param {function} callback - Callback function.\r\n  */\r\n  static fetchReviewsByRestId(id, callback) {\r\n    fetch(`${DBHelper.REVIEWS_URL}/?restaurant_id=${id}`)\r\n      .then(response => response.json())\r\n      .then(reviews => {\r\n        DBHelper.storeIndexedDB(IDB_REVIEWS, reviews);\r\n        callback(null, reviews)\r\n      })\r\n      .catch(error => {\r\n        DBHelper.getStoredObjectById(IDB_REVIEWS, 'by-restaurant-id', id)\r\n        .then((storedReviews) => {\r\n          callback(null, storedReviews);\r\n        }).catch(error => {\r\n          callback(error, null);\r\n        })\r\n      });\r\n  }\r\n\r\n\r\n  /**\r\n   * @description  Send review to server and stores it at database.\r\n   * @constructor\r\n   * @param {object} review - Reviwe object.\r\n   * @param {function} callback - Callback function.\r\n   */\r\n  static postReview(review, callback) {\r\n    fetch(DBHelper.REVIEWS_URL,\r\n      {\r\n        method:'post',\r\n        body:review\r\n      })\r\n      .then(response => response.json())\r\n      .then(review => {\r\n        DBHelper.storeIndexedDB(IDB_REVIEWS, review);\r\n        callback(null, review);\r\n      })\r\n      .catch(error => {\r\n        //Error sending review to server.\r\n        DBHelper.tagName = 'review';\r\n        DBHelper.addSyncServiceWorker();\r\n        DBHelper.storeIndexedDB(IDB_PENDING_REVIEWS, JSON.parse(review));\r\n        callback(null, review);\r\n      });\r\n  }\r\n\r\n\r\n  /**\r\n   * @description  Send request favorite/unfavorite to server and changes at database.\r\n   * @constructor\r\n   * @param {int} id - Restaurant identifier.\r\n   * @param {boolean} favorite - True to mark as favorite, otherwise false.\r\n   * @param {function} callback - Callback function.\r\n   */\r\n  static putFavorite(id, favorite, callback) {\r\n    fetch(`${DBHelper.RESTAURANTS_URL}/${id}/?is_favorite=${favorite}`,\r\n      {\r\n        method:'put',\r\n        body:favorite\r\n      })\r\n      .then(response => response.json())\r\n      .then(favorite => {\r\n        DBHelper.storeIndexedDB(IDB_RESTAURANTS, favorite);\r\n        callback(null, favorite);\r\n      })\r\n      .catch(error => {\r\n        //Error sending favorite/unfavorite to server.\r\n        callback(null, favorite);\r\n      });\r\n  }\r\n\r\n\r\n /**\r\n  * @description  Restaurant page URL.\r\n  * @constructor\r\n  * @param {object} restaurant - Restaurant information.\r\n  */\r\n  static urlForRestaurant(restaurant) {\r\n    return (`./restaurant.html?id=${restaurant.id}`);\r\n  }\r\n\r\n\r\n /**\r\n  * @description Restaurant image URL.\r\n  * @constructor\r\n  * @param {object} restaurant - Restaurant information.\r\n  */\r\n  static imageUrlForRestaurant(restaurant) {\r\n    let photograph = ('photograph' in restaurant) ? restaurant.photograph : restaurant.id;\r\n    return (`/dist/img/${photograph}`);\r\n  }\r\n\r\n\r\n /**\r\n  * @description Map marker for a restaurant.\r\n  * @constructor\r\n  * @param {object} restaurant - Restaurant coords and name.\r\n  * @param {object} map - Google map object.\r\n  */\r\n  static mapMarkerForRestaurant(restaurant, map) {\r\n    const marker = new google.maps.Marker({\r\n      position: restaurant.latlng,\r\n      title: restaurant.name,\r\n      url: DBHelper.urlForRestaurant(restaurant),\r\n      map: map,\r\n      animation: google.maps.Animation.DROP}\r\n    );\r\n    return marker;\r\n  }\r\n\r\n\r\n /**\r\n  * @description Register ServiceWorker.\r\n  * @constructor\r\n  */\r\n  static registerServiceWorker() {\r\n    if ('serviceWorker' in navigator) {\r\n      navigator.serviceWorker.register('sw.js')\r\n        .then((reg) => {\r\n          console.log(`Service Worker registration successful. Its scope is ${reg.scope} `);\r\n        }).catch((error) => {\r\n          console.log(`Service Worker registration error: ${error}`);\r\n        });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description Register ServiceWorker.\r\n   * @constructor\r\n   */\r\n   static addSyncServiceWorker() {\r\n     navigator.serviceWorker.ready.then(function(registration) {\r\n       registration.sync.register(DBHelper.tagName).then(function() {\r\n         console.log(`Registration ${DBHelper.tagName} succeeded.`);\r\n       }, function() {\r\n         console.error(`Registration ${DBHelper.tagName} failed!`);\r\n       });\r\n     });\r\n   }\r\n\r\n\r\n  /**\r\n    * @description Show or hide message when Service Worker is online o offline.\r\n    * @constructor\r\n    * @param {string} offline - String detected.\r\n    * @param {event} event - Event called\r\n    */\r\n    static showMessage(type) {\r\n      let message = document.getElementById('sw-message');\r\n      switch(type) {\r\n        case 'online':\r\n          message.style.display = 'none';\r\n          break;\r\n        case 'offline':\r\n          message.style.display = 'block';\r\n          break;\r\n      }\r\n    }\r\n\r\n}\r\nmodule.exports = DBHelper;\r\n","const DBHelper = require('./dbhelper');\nlet restaurant;\nlet reviews;\nlet is_favorite;\nlet map;\nlet staticMap = false;\nconst MONTH = {\n  0: 'January',\n  1: 'February',\n  2: 'March',\n  3: 'April',\n  4: 'May',\n  5: 'June',\n  6: 'July',\n  7: 'August',\n  8: 'September',\n  9: 'October',\n  10: 'November',\n  11: 'December'\n};\n\n/**\n  * @description Call functions when DOM content is loaded\n  * @constructor\n  * @param {string} DOMContentLoaded - String detected.\n  * @param {event} event - Event called\n  */\ndocument.addEventListener('DOMContentLoaded', (event) => {\n  DBHelper.registerServiceWorker();\n  DBHelper.openIndexedDB();\n  eventListenerSubmitedReview();\n});\n\n\n/**\n  * @description Call functions when window is resized\n  * @constructor\n  * @param {string} resize - String detected.\n  * @param {event} event - Event called\n  */\nwindow.addEventListener('resize', (event) =>{\n  initMap();\n});\n\n\n/**\n  * @description Call functions when service worker is online.\n  * @constructor\n  * @param {string} online - String detected.\n  * @param {event} event - Event called\n  */\n window.addEventListener('online',(event)=>{\n   event.preventDefault();\n   DBHelper.showMessage(event.type);\n });\n\n\n /**\n   * @description Call functions when service worker is offline.\n   * @constructor\n   * @param {string} offline - String detected.\n   * @param {event} event - Event called\n   */\n window.addEventListener('offline',(event)=>{\n   event.preventDefault();\n   DBHelper.showMessage(event.type);\n });\n\n\n/**\n * @description  Fetch reviews by restaurant id and set their HTML.\n * @constructor\n * @param {object} error - error object.\n * @param {object} neighborhoods - neighborhood list.\n */\nfetchReviewsByRestId = (id) => {\n  DBHelper.fetchReviewsByRestId(id, (error, reviews) => {\n    self.reviews = reviews;\n    if (!reviews) {\n      console.error(error);\n      return;\n    } else {\n      fillReviewsHTML();\n    }\n  });\n}\n\n\n/**\n  * @description Get current restaurant from page URL.\n  * @constructor\n  * @param {callback} callback - Callback returned.\n  */\nfetchRestaurantFromURL = (callback) => {\n  if (self.restaurant) { // restaurant already fetched!\n    callback(null, self.restaurant)\n    return;\n  }\n  const id = getParameterByName('id');\n  if (!id) { // no id found in URL\n    error = 'No restaurant id in URL'\n    callback(error, null);\n  } else {\n    DBHelper.fetchRestaurantById(id, (error, restaurant) => {\n      if (!restaurant) {\n        console.error(error);\n        return;\n      }\n      self.restaurant = restaurant;\n      self.is_favorite = (restaurant.is_favorite == 'true') ? true: false;addEventListener\n      fillRestaurantHTML();\n      callback(null, restaurant);\n    });\n  }\n}\n\n\n/**\n * @description Create restaurant HTML and add it to the webpage.\n * @constructor\n * @param {object} restaurant - All restaurant info.\n */\nfillRestaurantHTML = (restaurant = self.restaurant) => {\n  const name = document.getElementById('restaurant-name');\n  name.innerHTML = restaurant.name;\n\n  const address = document.getElementById('restaurant-address');\n  address.innerHTML = restaurant.address;\n\n  const favorite = document.getElementById('favorite');\n  const link = document.createElement('a');\n  link.className = 'favorite';\n  link.setAttribute('role', 'button');\n  link.setAttribute('tabindex', '0');\n  eventListenerFavorite(link);\n\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  svg.setAttribute('class','svg-fav');\n  svg.setAttribute('viewBox','0 0 576 512');\n  svg.setAttribute('aria-labelledby','title description');\n\n  const title = document.createElementNS('http://www.w3.org/2000/svg', \"title\");\n  title.setAttribute('id', 'title');\n\n  const desc = document.createElementNS('http://www.w3.org/2000/svg', \"desc\");\n  desc.setAttribute('id', 'description');\n  desc.innerHTML = 'Favorite image';\n\n  const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  path.setAttribute('class','path-fav');\n  path.setAttribute('role','presentation');\n\n  if( self.is_favorite ) {\n    link.title = 'Remove favorite';\n    link.setAttribute('aria-label', 'Remove favorite');\n    link.dataset.favorite = 'remove';\n    title.innerHTML = 'Remove favorite';\n    path.setAttribute(\"d\",\"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z\");\n  } else {\n    link.title = 'Add to favorite';\n    link.setAttribute('aria-label', 'Add to favorite');\n    link.dataset.favorite = 'add';\n    title.innerHTML = 'Add to favorite';\n    path.setAttribute(\"d\",\"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z\");\n  }\n\n  svg.appendChild(title);\n  svg.appendChild(desc);\n  svg.appendChild(path);\n  link.append(svg);\n  favorite.append(link);\n\n  const img = DBHelper.imageUrlForRestaurant(restaurant);\n  const picture = document.getElementById('restaurant-picture');\n  picture.className = 'restaurant-img';\n  picture.setAttribute('aria-labelledby', `restaurant-img`);\n  picture.setAttribute('role', 'img');\n\n  const sourceSmall = document.createElement('source');\n  sourceSmall.setAttribute('media', '(max-width:480px)');\n  sourceSmall.setAttribute('srcset', `${img}-380_small.jpg`);\n  picture.append(sourceSmall);\n\n  const sourceMedium = document.createElement('source');\n  sourceMedium.setAttribute('media', '(min-width: 480px) and (max-width: 960px)');\n  sourceMedium.setAttribute('srcset', `${img}-512_medium.jpg`);\n  picture.append(sourceMedium);\n\n  const sourceLarge = document.createElement('source');\n  sourceLarge.setAttribute('media', '(min-width:961px)');\n  sourceLarge.setAttribute('srcset', `${img}-800_large.jpg`);\n  picture.append(sourceLarge);\n\n  const image = document.getElementById('restaurant-img');\n  image.className = 'restaurant-img';\n  image.alt = `Picture of ${restaurant.name} restaurant`;\n  image.src = `${img}-380_small.jpg`;\n\n  picture.append(image);\n\n  const cuisine = document.getElementById('restaurant-cuisine');\n  cuisine.innerHTML = restaurant.cuisine_type;\n\n  // fill operating hours\n  if (restaurant.operating_hours) {\n    fillRestaurantHoursHTML();\n  }\n\n  fetchReviewsByRestId(restaurant.id);\n}\n\n\n/**\n  * @description Create restaurant operating hours HTML table and add it to the webpage.\n  * @constructor\n  * @param {object} operatingHours - All restaurant operating hours.\n  */\nfillRestaurantHoursHTML = (operatingHours = self.restaurant.operating_hours) => {\n  const hours = document.getElementById('restaurant-hours');\n  for (let key in operatingHours) {\n    const row = document.createElement('tr');\n\n    const day = document.createElement('td');\n    day.innerHTML = key;\n    row.appendChild(day);\n\n    const time = document.createElement('td');\n    time.innerHTML = operatingHours[key];\n    row.appendChild(time);\n\n    hours.appendChild(row);\n  }\n}\n\n\n/**\n * @description Create all reviews HTML and add them to the webpage.\n * @constructor\n * @param {object} reviews - All reviews related to a restaurant.\n */\nfillReviewsHTML = (reviews = self.reviews) => {\n\n  if (!reviews) {\n    fetchReviewsByRestId(self.restaurant.id);\n  }\n  const container = document.getElementById('reviews-container');\n  const title = document.createElement('h3');\n  title.innerHTML = '';\n  title.innerHTML = 'Reviews';\n  container.appendChild(title);\n\n  if (!reviews) {\n    const noReviews = document.createElement('p');\n    noReviews.innerHTML = 'No reviews yet!';\n    container.appendChild(noReviews);\n    return;\n  }\n  const ul = document.getElementById('reviews-list');\n  ul.innerHTML = '';\n\n  reviews.forEach(review => {\n    ul.appendChild(createReviewHTML(review));\n  });\n  container.appendChild(ul);\n}\n\n\n/**\n * @description Create review HTML and add it to the webpage.\n * @constructor\n * @param {object} review - One reveiw from a restaurant.\n */\ncreateReviewHTML = (review) => {\n  const li = document.createElement('li');\n  const name = document.createElement('p');\n  name.innerHTML = review.name;\n  li.appendChild(name);\n\n  const date = document.createElement('p');\n  let fullDate = new Date(review.createdAt);\n  date.innerHTML\t= `${MONTH[fullDate.getMonth()]} ${fullDate.getDate()}, ${fullDate.getFullYear()}`;\n  li.appendChild(date);\n\n  const rating = document.createElement('p');\n  rating.innerHTML = `Rating: ${review.rating}`;\n  li.appendChild(rating);\n\n  const comments = document.createElement('p');\n  comments.innerHTML = review.comments;\n  li.appendChild(comments);\n\n  return li;\n}\n\n\n/**\n * @description Add restaurant name to the breadcrumb navigation menu.\n * @constructor\n * @param {object} restaurant - Restaurant information.\n */\nfillBreadcrumb = (restaurant=self.restaurant) => {\n  const breadcrumb = document.getElementById('breadcrumb');\n  const li = document.createElement('li');\n  li.innerHTML = restaurant.name;\n  breadcrumb.appendChild(li);\n}\n\n/**\n * @description Get a parameter by name from page URL.\n * @constructor\n * @param {string} name - parameter name\n * @param {string} url - url requested\n */\ngetParameterByName = (name, url) => {\n  if (!url)\n    url = window.location.href;\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  const regex = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`),\n    results = regex.exec(url);\n  if (!results)\n    return null;\n  if (!results[2])\n    return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\n/**\n* @description  Depends of resolutions initalize image map or google map.\n* @constructor\n*/\nwindow.initMap = () => {\n  if(window.innerWidth < 641) {\n    var googleMap = document.getElementById('map');\n    googleMap.style.display = 'none';\n    displayStaticMap();\n    self.staticMap = true;\n  } else {\n    var imageMap = document.getElementById('static-map');\n    imageMap.style.display = 'none';\n    displayMap();\n    self.staticMap = false;\n  }\n}\n\n\n/**\n* @description  Initialize Google map, called from HTML.\n* @constructor\n*/\ndisplayMap = () => {\n  if(self.staticMap === false) {\n    return;\n  }\n  fetchRestaurantFromURL((error, restaurant) => {\n    if (error) { // Got an error!\n      console.error(error);\n    } else {\n      let googleMap = document.getElementById('map');\n      googleMap.style.display = 'block';\n      self.staticMap = false;\n\n      self.map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 16,\n        center: restaurant.latlng,\n        scrollwheel: false\n      });\n\n      DBHelper.mapMarkerForRestaurant(restaurant, self.map);\n    }\n  });\n\n}\n\n\n/**\n* @description  Display Static map at Mobile resolutions.\n* @constructor\n*/\ndisplayStaticMap = () => {\n  if(self.staticMap === true) {\n    return;\n  }\n  fetchRestaurantFromURL((error, restaurant) => {\n    if (error) { // Got an error!\n      console.error(error);\n    } else {\n      let imageMap = document.getElementById('static-map');\n      imageMap.style.display = 'block';\n      fillBreadcrumb();\n      DBHelper.mapMarkerForRestaurant(self.restaurant, self.map);\n      imageMap.setAttribute('src',`https://maps.googleapis.com/maps/api/staticmap?center=${restaurant.latlng.lat},${restaurant.latlng.lng}&size=${window.innerWidth}x400&format=jpg&maptype=roadmap&markers=color:red|${restaurant.latlng.lat},${restaurant.latlng.lng}&key=AIzaSyCtvz3BAT5-XChlZ_dhuW3GAglJeHk_2Os`);\n      self.staticMap = true;\n      imageMap.addEventListener('click',function(e) {\n        e.preventDefault();\n        imageMap.style.display ='none';\n        displayMap();\n      });\n    }\n  });\n}\n\n\n/**\n * @description Calls click event of submited button.\n * @constructor\n */\neventListenerSubmitedReview = () => {\n  let submitReview = document.getElementById('submit');\n  submitReview.addEventListener('click',function(e) {\n    e.preventDefault();\n    const alert = document.getElementById('alert');\n    alert.innerHTML = '';\n    alert.style.display = 'none';\n    const success = document.getElementById('success');\n    success.style.display = 'none';\n\n    let review = {\n      'restaurant_id': self.restaurant.id,\n      'name': document.getElementById('name').value,\n      'rating': document.querySelector('#rating').value,\n      'comments': document.getElementById('review').value,\n      'createdAt': Date.now(),\n      'updatedAt': Date.now()\n    }\n\n    if (validateForm(review)) {\n      sendReview(review, e);\n      success.style.display = 'block';\n    } else {\n      alert.style.display = 'block';\n    }\n  });\n}\n\n\n/**\n * @description Validate review form.\n * @constructor\n */\nvalidateForm = (review) => {\n  //All fields are required.\n  let name = review.name;\n  let rating = review.rating;\n  let comment = review.review;\n  let isValid = true;\n  const alert = document.getElementById('alert');\n  alert.innerHTML = '';\n  let aTitle = document.createElement('p');\n  aTitle.innerHTML = 'Please fill required fields:';\n  alert.appendChild(aTitle);\n\n  if( name == \"\" ) {\n    isValid =false;\n    let aName = document.createElement('p');\n    aName.innerHTML = '* Name is required.';\n    alert.appendChild(aName);\n  }\n  if( rating == \"\" ) {\n    isValid =false;\n    let aRating = document.createElement('p');\n    aRating.innerHTML = '* Review is required';\n    alert.appendChild(aRating);\n  }\n  if( comment == \"\" ) {\n    isValid =false;\n    let aReview = document.createElement('p');\n    aReview.innerHTML = '* Rating is required';\n    alert.appendChild(aReview);\n  }\n  return isValid;\n}\n\n\n/**\n * @description Create a new review\n * @constructor\n * @param {e} error  - Error handle.\n */\nsendReview = (review, e) => {\n  DBHelper.postReview(JSON.stringify(review), (error, result) => {\n    if (!result) {\n      console.error(error);\n      return;\n    }\n    self.reviews.push(review);\n    fillReviewsHTML();\n  });\n}\n\n\n/**\n * @description Calls click event of favorite/unfavorite button.\n * @constructor\n * @param {object} link  - Link to add the event listener.\n */\neventListenerFavorite = (link) => {\n  link.addEventListener('click', function(e) {\n    event.preventDefault();\n    self.is_favorite = (this.dataset.favorite == 'add') ? true : false;\n    DBHelper.putFavorite(self.restaurant.id, self.is_favorite, (error, result) => {\n      if (!result) {\n        console.error(error);\n        return;\n      }\n      self.restaurant.is_favorite = self.is_favorite ? 'true' : 'false';\n      if( self.is_favorite ) {\n        link.title = 'Remove favorite';\n        link.setAttribute('aria-label', 'Remove favorite');\n        link.dataset.favorite = 'remove';\n        link.getElementsByTagName('title')[0].innerHTML = 'Remove favorite';\n        link.getElementsByTagName('path')[0].setAttribute(\"d\",\"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z\");\n      } else {\n        link.title = 'Add to favorite';\n        link.setAttribute('aria-label', 'Add to favorite');\n        link.dataset.favorite = 'add';\n        link.getElementsByTagName('title')[0].innerHTML = 'Add to favorite';\n        link.getElementsByTagName('path')[0].setAttribute(\"d\",\"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z\");\n      }\n    });\n  });\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaWRiL2xpYi9pZGIuanMiLCJyZXNvdXJjZXMvanMvZGJoZWxwZXIuanMiLCJyZXNvdXJjZXMvanMvcmVzdGF1cmFudF9pbmZvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZUQSxNQUFNLE1BQU0sUUFBUSxLQUFSLENBQVo7QUFDQSxNQUFNLFNBQVMsZUFBZjtBQUNB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QTRCLE9BQTFEO0FBQ0EsVUFBSSxLQUFLLFdBQVQsRUFBdUI7QUFDckIsYUFBSyxLQUFMLEdBQWEsaUJBQWI7QUFDQSxhQUFLLFlBQUwsQ0FBa0IsWUFBbEIsRUFBZ0MsaUJBQWhDO0FBQ0EsYUFBSyxPQUFMLENBQWEsUUFBYixHQUF3QixRQUF4QjtBQUNBLGFBQUssb0JBQUwsQ0FBMEIsT0FBMUIsRUFBbUMsQ0FBbkMsRUFBc0MsU0FBdEMsR0FBa0QsaUJBQWxEO0FBQ0EsYUFBSyxvQkFBTCxDQUEwQixNQUExQixFQUFrQyxDQUFsQyxFQUFxQyxZQUFyQyxDQUFrRCxHQUFsRCxFQUFzRCxrUUFBdEQ7QUFDRCxPQU5ELE1BTU87QUFDTCxhQUFLLEtBQUwsR0FBYSxpQkFBYjtBQUNBLGFBQUssWUFBTCxDQUFrQixZQUFsQixFQUFnQyxpQkFBaEM7QUFDQSxhQUFLLE9BQUwsQ0FBYSxRQUFiLEdBQXdCLEtBQXhCO0FBQ0EsYUFBSyxvQkFBTCxDQUEwQixPQUExQixFQUFtQyxDQUFuQyxFQUFzQyxTQUF0QyxHQUFrRCxpQkFBbEQ7QUFDQSxhQUFLLG9CQUFMLENBQTBCLE1BQTFCLEVBQWtDLENBQWxDLEVBQXFDLFlBQXJDLENBQWtELEdBQWxELEVBQXNELGtYQUF0RDtBQUNEO0FBQ0YsS0FuQkQ7QUFvQkQsR0F2QkQ7QUF3QkQsQ0F6QkQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gdG9BcnJheShhcnIpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncykge1xuICAgIHZhciByZXF1ZXN0O1xuICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXF1ZXN0ID0gb2JqW21ldGhvZF0uYXBwbHkob2JqLCBhcmdzKTtcbiAgICAgIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH0pO1xuXG4gICAgcC5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKSB7XG4gICAgdmFyIHAgPSBwcm9taXNpZnlSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncyk7XG4gICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuICAgICAgcmV0dXJuIG5ldyBDdXJzb3IodmFsdWUsIHAucmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eVByb3BlcnRpZXMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJveHlDbGFzcy5wcm90b3R5cGUsIHByb3AsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpc1t0YXJnZXRQcm9wXVtwcm9wXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICB0aGlzW3RhcmdldFByb3BdW3Byb3BdID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5UmVxdWVzdE1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdENhbGwodGhpc1t0YXJnZXRQcm9wXSwgcHJvcCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eU1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpc1t0YXJnZXRQcm9wXVtwcm9wXS5hcHBseSh0aGlzW3RhcmdldFByb3BdLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5Q3Vyc29yUmVxdWVzdENhbGwodGhpc1t0YXJnZXRQcm9wXSwgcHJvcCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBJbmRleChpbmRleCkge1xuICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gIH1cblxuICBwcm94eVByb3BlcnRpZXMoSW5kZXgsICdfaW5kZXgnLCBbXG4gICAgJ25hbWUnLFxuICAgICdrZXlQYXRoJyxcbiAgICAnbXVsdGlFbnRyeScsXG4gICAgJ3VuaXF1ZSdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhJbmRleCwgJ19pbmRleCcsIElEQkluZGV4LCBbXG4gICAgJ2dldCcsXG4gICAgJ2dldEtleScsXG4gICAgJ2dldEFsbCcsXG4gICAgJ2dldEFsbEtleXMnLFxuICAgICdjb3VudCdcbiAgXSk7XG5cbiAgcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhJbmRleCwgJ19pbmRleCcsIElEQkluZGV4LCBbXG4gICAgJ29wZW5DdXJzb3InLFxuICAgICdvcGVuS2V5Q3Vyc29yJ1xuICBdKTtcblxuICBmdW5jdGlvbiBDdXJzb3IoY3Vyc29yLCByZXF1ZXN0KSB7XG4gICAgdGhpcy5fY3Vyc29yID0gY3Vyc29yO1xuICAgIHRoaXMuX3JlcXVlc3QgPSByZXF1ZXN0O1xuICB9XG5cbiAgcHJveHlQcm9wZXJ0aWVzKEN1cnNvciwgJ19jdXJzb3InLCBbXG4gICAgJ2RpcmVjdGlvbicsXG4gICAgJ2tleScsXG4gICAgJ3ByaW1hcnlLZXknLFxuICAgICd2YWx1ZSdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhDdXJzb3IsICdfY3Vyc29yJywgSURCQ3Vyc29yLCBbXG4gICAgJ3VwZGF0ZScsXG4gICAgJ2RlbGV0ZSdcbiAgXSk7XG5cbiAgLy8gcHJveHkgJ25leHQnIG1ldGhvZHNcbiAgWydhZHZhbmNlJywgJ2NvbnRpbnVlJywgJ2NvbnRpbnVlUHJpbWFyeUtleSddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgIGlmICghKG1ldGhvZE5hbWUgaW4gSURCQ3Vyc29yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICBDdXJzb3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY3Vyc29yID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGN1cnNvci5fY3Vyc29yW21ldGhvZE5hbWVdLmFwcGx5KGN1cnNvci5fY3Vyc29yLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QoY3Vyc29yLl9yZXF1ZXN0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuICAgICAgICAgIHJldHVybiBuZXcgQ3Vyc29yKHZhbHVlLCBjdXJzb3IuX3JlcXVlc3QpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIE9iamVjdFN0b3JlKHN0b3JlKSB7XG4gICAgdGhpcy5fc3RvcmUgPSBzdG9yZTtcbiAgfVxuXG4gIE9iamVjdFN0b3JlLnByb3RvdHlwZS5jcmVhdGVJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgSW5kZXgodGhpcy5fc3RvcmUuY3JlYXRlSW5kZXguYXBwbHkodGhpcy5fc3RvcmUsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIE9iamVjdFN0b3JlLnByb3RvdHlwZS5pbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgSW5kZXgodGhpcy5fc3RvcmUuaW5kZXguYXBwbHkodGhpcy5fc3RvcmUsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIFtcbiAgICAnbmFtZScsXG4gICAgJ2tleVBhdGgnLFxuICAgICdpbmRleE5hbWVzJyxcbiAgICAnYXV0b0luY3JlbWVudCdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ3B1dCcsXG4gICAgJ2FkZCcsXG4gICAgJ2RlbGV0ZScsXG4gICAgJ2NsZWFyJyxcbiAgICAnZ2V0JyxcbiAgICAnZ2V0QWxsJyxcbiAgICAnZ2V0S2V5JyxcbiAgICAnZ2V0QWxsS2V5cycsXG4gICAgJ2NvdW50J1xuICBdKTtcblxuICBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAnb3BlbkN1cnNvcicsXG4gICAgJ29wZW5LZXlDdXJzb3InXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ2RlbGV0ZUluZGV4J1xuICBdKTtcblxuICBmdW5jdGlvbiBUcmFuc2FjdGlvbihpZGJUcmFuc2FjdGlvbikge1xuICAgIHRoaXMuX3R4ID0gaWRiVHJhbnNhY3Rpb247XG4gICAgdGhpcy5jb21wbGV0ZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QoaWRiVHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgfTtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGlkYlRyYW5zYWN0aW9uLmVycm9yKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBUcmFuc2FjdGlvbi5wcm90b3R5cGUub2JqZWN0U3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlKHRoaXMuX3R4Lm9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX3R4LCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoVHJhbnNhY3Rpb24sICdfdHgnLCBbXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnLFxuICAgICdtb2RlJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoVHJhbnNhY3Rpb24sICdfdHgnLCBJREJUcmFuc2FjdGlvbiwgW1xuICAgICdhYm9ydCdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gVXBncmFkZURCKGRiLCBvbGRWZXJzaW9uLCB0cmFuc2FjdGlvbikge1xuICAgIHRoaXMuX2RiID0gZGI7XG4gICAgdGhpcy5vbGRWZXJzaW9uID0gb2xkVmVyc2lvbjtcbiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgfVxuXG4gIFVwZ3JhZGVEQi5wcm90b3R5cGUuY3JlYXRlT2JqZWN0U3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlKHRoaXMuX2RiLmNyZWF0ZU9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX2RiLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoVXBncmFkZURCLCAnX2RiJywgW1xuICAgICduYW1lJyxcbiAgICAndmVyc2lvbicsXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhVcGdyYWRlREIsICdfZGInLCBJREJEYXRhYmFzZSwgW1xuICAgICdkZWxldGVPYmplY3RTdG9yZScsXG4gICAgJ2Nsb3NlJ1xuICBdKTtcblxuICBmdW5jdGlvbiBEQihkYikge1xuICAgIHRoaXMuX2RiID0gZGI7XG4gIH1cblxuICBEQi5wcm90b3R5cGUudHJhbnNhY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKHRoaXMuX2RiLnRyYW5zYWN0aW9uLmFwcGx5KHRoaXMuX2RiLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoREIsICdfZGInLCBbXG4gICAgJ25hbWUnLFxuICAgICd2ZXJzaW9uJyxcbiAgICAnb2JqZWN0U3RvcmVOYW1lcydcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKERCLCAnX2RiJywgSURCRGF0YWJhc2UsIFtcbiAgICAnY2xvc2UnXG4gIF0pO1xuXG4gIC8vIEFkZCBjdXJzb3IgaXRlcmF0b3JzXG4gIC8vIFRPRE86IHJlbW92ZSB0aGlzIG9uY2UgYnJvd3NlcnMgZG8gdGhlIHJpZ2h0IHRoaW5nIHdpdGggcHJvbWlzZXNcbiAgWydvcGVuQ3Vyc29yJywgJ29wZW5LZXlDdXJzb3InXS5mb3JFYWNoKGZ1bmN0aW9uKGZ1bmNOYW1lKSB7XG4gICAgW09iamVjdFN0b3JlLCBJbmRleF0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlW2Z1bmNOYW1lLnJlcGxhY2UoJ29wZW4nLCAnaXRlcmF0ZScpXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgICAgICB2YXIgbmF0aXZlT2JqZWN0ID0gdGhpcy5fc3RvcmUgfHwgdGhpcy5faW5kZXg7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmF0aXZlT2JqZWN0W2Z1bmNOYW1lXS5hcHBseShuYXRpdmVPYmplY3QsIGFyZ3Muc2xpY2UoMCwgLTEpKTtcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBwb2x5ZmlsbCBnZXRBbGxcbiAgW0luZGV4LCBPYmplY3RTdG9yZV0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0QWxsKSByZXR1cm47XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKHF1ZXJ5LCBjb3VudCkge1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHZhciBpdGVtcyA9IFtdO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgICBpbnN0YW5jZS5pdGVyYXRlQ3Vyc29yKHF1ZXJ5LCBmdW5jdGlvbihjdXJzb3IpIHtcbiAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goY3Vyc29yLnZhbHVlKTtcblxuICAgICAgICAgIGlmIChjb3VudCAhPT0gdW5kZWZpbmVkICYmIGl0ZW1zLmxlbmd0aCA9PSBjb3VudCkge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIHZhciBleHAgPSB7XG4gICAgb3BlbjogZnVuY3Rpb24obmFtZSwgdmVyc2lvbiwgdXBncmFkZUNhbGxiYWNrKSB7XG4gICAgICB2YXIgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ29wZW4nLCBbbmFtZSwgdmVyc2lvbl0pO1xuICAgICAgdmFyIHJlcXVlc3QgPSBwLnJlcXVlc3Q7XG5cbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKHVwZ3JhZGVDYWxsYmFjaykge1xuICAgICAgICAgIHVwZ3JhZGVDYWxsYmFjayhuZXcgVXBncmFkZURCKHJlcXVlc3QucmVzdWx0LCBldmVudC5vbGRWZXJzaW9uLCByZXF1ZXN0LnRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24oZGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEQihkYik7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlbGV0ZTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ2RlbGV0ZURhdGFiYXNlJywgW25hbWVdKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHA7XG4gICAgbW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IG1vZHVsZS5leHBvcnRzO1xuICB9XG4gIGVsc2Uge1xuICAgIHNlbGYuaWRiID0gZXhwO1xuICB9XG59KCkpO1xuIiwiY29uc3QgaWRiID0gcmVxdWlyZSgnaWRiJyk7XHJcbmNvbnN0IElEQl9EQiA9ICdyZXN0YXVyYW50LWRiJztcclxuY29uc3QgSURCX1JFU1RBVVJBTlRTID0gJ3Jlc3RhdXJhbnRzJztcclxuY29uc3QgSURCX1BFTkRJTkdfUkVTVEFVUkFOVFMgPSAncGVuZGluZ19yZXN0YXVyYW50cyc7XHJcbmNvbnN0IElEQl9SRVZJRVdTID0gJ3Jldmlld3MnO1xyXG5jb25zdCBJREJfUEVORElOR19SRVZJRVdTID0gJ3BlbmRpbmdfcmV2aWV3cyc7XHJcbmxldCB0YWdOYW1lID0gJyc7XHJcblxyXG4gLyoqXHJcbiAgKiBAZGVzY3JpcHRpb24gIENvbW1vbiBkYXRhYmFzZSBoZWxwZXIgZnVuY3Rpb25zLlxyXG4gICogQGNvbnN0cnVjdG9yXHJcbiAgKi9cclxuY2xhc3MgREJIZWxwZXIge1xyXG4gLyoqXHJcbiAgKiBAZGVzY3JpcHRpb24gIERhdGFiYXNlIFVSTC4gQ2hhbmdlIHRoaXMgdG8gcmVzdGF1cmFudHMuanNvbiBmaWxlIGxvY2F0aW9uIG9uIHlvdXIgc2VydmVyLlxyXG4gICogQGNvbnN0cnVjdG9yXHJcbiAgKi9cclxuICBzdGF0aWMgZ2V0IFJFU1RBVVJBTlRTX1VSTCgpIHtcclxuICAgIGNvbnN0IHBvcnQgPSAxMzM3IC8vIENoYW5nZSB0aGlzIHRvIHlvdXIgc2VydmVyIHBvcnRcclxuICAgIHJldHVybiBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9L3Jlc3RhdXJhbnRzYDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBkZXNjcmlwdGlvbiAgRGF0YWJhc2UgVVJMLiBDaGFuZ2UgdGhpcyB0byByZXN0YXVyYW50cy5qc29uIGZpbGUgbG9jYXRpb24gb24geW91ciBzZXJ2ZXIuXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICovXHJcbiAgIHN0YXRpYyBnZXQgUkVWSUVXU19VUkwoKSB7XHJcbiAgICAgY29uc3QgcG9ydCA9IDEzMzcgLy8gQ2hhbmdlIHRoaXMgdG8geW91ciBzZXJ2ZXIgcG9ydFxyXG4gICAgIHJldHVybiBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9L3Jldmlld3NgO1xyXG4gICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAZGVzY3JpcHRpb24gIE9wZW4gZGF0YWJhc2UuXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICovXHJcbiAgc3RhdGljIG9wZW5JbmRleGVkREIoKSB7XHJcbiAgICAvLyBJZiB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgc2VydmljZSB3b3JrZXIsXHJcbiAgICAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGhhdmluZyBhIGRhdGFiYXNlXHJcbiAgICBpZiAoIW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRiUHJvbWlzZSA9IGlkYi5vcGVuKElEQl9EQiwgMiwgZnVuY3Rpb24gKHVwZ3JhZGVEYikge1xyXG4gICAgICBzd2l0Y2ggKHVwZ3JhZGVEYi5vbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICBjb25zdCBzdG9yZVJlc3RhdXJhbnQgPSB1cGdyYWRlRGIuY3JlYXRlT2JqZWN0U3RvcmUoSURCX1JFU1RBVVJBTlRTLCB7XHJcbiAgICAgICAgICAgIGtleVBhdGg6ICdpZCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgc3RvcmVSZXN0YXVyYW50LmNyZWF0ZUluZGV4KCdieS1pZCcsICdpZCcsIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHN0b3JlUmV2aWV3cyA9IHVwZ3JhZGVEYi5jcmVhdGVPYmplY3RTdG9yZShJREJfUkVWSUVXUywge1xyXG4gICAgICAgICAgICBrZXlQYXRoOiAnaWQnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHN0b3JlUmV2aWV3cy5jcmVhdGVJbmRleCgnYnktaWQnLCAnaWQnLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgIHN0b3JlUmV2aWV3cy5jcmVhdGVJbmRleCgnYnktcmVzdGF1cmFudC1pZCcsICdyZXN0YXVyYW50X2lkJyk7XHJcblxyXG4gICAgICAgICAgY29uc3QgcGVuZGluZ1Jlc3RhdXJhbnRzID0gdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKElEQl9QRU5ESU5HX1JFU1RBVVJBTlRTLCB7XHJcbiAgICAgICAgICAgIGtleVBhdGg6ICdpZCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcGVuZGluZ1Jlc3RhdXJhbnRzLmNyZWF0ZUluZGV4KCdieS1pZCcsICdpZCcsIHt1bmlxdWU6dHJ1ZX0pO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHBlbmRpbmdSZXZpZXdzID0gdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKElEQl9QRU5ESU5HX1JFVklFV1MsIHtcclxuICAgICAgICAgICAga2V5UGF0aDonaWQnLCBhdXRvSW5jcmVtZW50OnRydWVcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcGVuZGluZ1Jldmlld3MuY3JlYXRlSW5kZXgoJ2J5LWlkJywgJ2lkJywge3VuaXF1ZTp0cnVlfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBkZXNjcmlwdGlvbiAgU2F2ZSBkYXRhIHJlc3RhdXJhbnQuXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IE9iamVjdCBsaXN0IC0gT2JqZWN0IGxpa2UgcmVzdGF1cmFudCwgcmV2ZWl3LCAuLi5cclxuICAgKi9cclxuICBzdGF0aWMgc3RvcmVJbmRleGVkREIodGFibGUsIG9iamVjdHMpIHtcclxuICAgIHRoaXMuZGJQcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRiKSB7XHJcbiAgICAgIGlmKCFkYikgcmV0dXJuO1xyXG5cclxuICAgICAgbGV0IHR4ID0gZGIudHJhbnNhY3Rpb24odGFibGUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSh0YWJsZSk7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdHMpKSB7XHJcbiAgICAgICAgb2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKG9iamVjdCl7XHJcbiAgICAgICAgICBzdG9yZS5wdXQob2JqZWN0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdG9yZS5wdXQob2JqZWN0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBkZXNjcmlwdGlvbiAgR2V0IGEgY29sbGVjdGlvbiBvZiBvYmplY3RzIGZyb20gaW5kZXhlZERCLlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRTdG9yZWRPYmplY3RzKHRhYmxlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kYlByb21pc2UudGhlbihmdW5jdGlvbihkYikge1xyXG4gICAgICBpZighZGIpIHJldHVybjtcclxuICAgICAgY29uc3Qgc3RvcmUgPSBkYi50cmFuc2FjdGlvbih0YWJsZSkub2JqZWN0U3RvcmUodGFibGUpO1xyXG4gICAgICByZXR1cm4gc3RvcmUuZ2V0QWxsKCk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBkZXNjcmlwdGlvbiAgR2V0IG9iamVjdCBmcm9tIGluZGV4ZWREQiBieSBpbmRleFxyXG4gICAqIEBjb25zdHJ1Y3RvciB7aW50fSBpZCAtIFJlc3RhdXJhbnQgaWRcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0U3RvcmVkT2JqZWN0QnlJZCh0YWJsZSwgaWR4LCBpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGJQcm9taXNlLnRoZW4oZnVuY3Rpb24oZGIpIHtcclxuICAgICAgaWYoIWRiKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCBzdG9yZSA9IGRiLnRyYW5zYWN0aW9uKHRhYmxlKS5vYmplY3RTdG9yZSh0YWJsZSk7XHJcbiAgICAgIGNvbnN0IGluZGV4SWQgPSBzdG9yZS5pbmRleChpZHgpO1xyXG4gICAgICByZXR1cm4gaW5kZXhJZC5nZXRBbGwoaWQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAvKipcclxuICAqIEBkZXNjcmlwdGlvbiAgRmV0Y2ggYWxsIHJlc3RhdXJhbnRzLlxyXG4gICogQGNvbnN0cnVjdG9yXHJcbiAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudHMoY2FsbGJhY2spIHtcclxuICAgIGZldGNoKERCSGVscGVyLlJFU1RBVVJBTlRTX1VSTClcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAudGhlbihyZXN0YXVyYW50cyA9PiB7XHJcbiAgICAgICAgREJIZWxwZXIuc3RvcmVJbmRleGVkREIoSURCX1JFU1RBVVJBTlRTLCByZXN0YXVyYW50cyk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudHMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIERCSGVscGVyLmdldFN0b3JlZE9iamVjdHMoSURCX1JFU1RBVVJBTlRTKVxyXG4gICAgICAgIC50aGVuKChzdG9yZWRSZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgc3RvcmVkUmVzdGF1cmFudHMpO1xyXG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG5cclxuIC8qKlxyXG4gICogQGRlc2NyaXB0aW9uICBGZXRjaCBhIHJlc3RhdXJhbnQgYnkgaXRzIElELlxyXG4gICogQGNvbnN0cnVjdG9yXHJcbiAgKiBAcGFyYW0ge2ludH0gaWQgLSBSZXN0YXVyYW50IGlkZW50aWZpZXIuXHJcbiAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIGNhbGxiYWNrKSB7XHJcbiAgICBmZXRjaChgJHtEQkhlbHBlci5SRVNUQVVSQU5UU19VUkx9LyR7aWR9YClcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAudGhlbihyZXN0YXVyYW50ID0+IHtcclxuICAgICAgICBEQkhlbHBlci5zdG9yZUluZGV4ZWREQihJREJfUkVTVEFVUkFOVFMsIHJlc3RhdXJhbnQpO1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIERCSGVscGVyLmdldFN0b3JlZE9iamVjdEJ5SWQoSURCX1JFU1RBVVJBTlRTLCAnYnktaWQnICxpZClcclxuICAgICAgICAudGhlbigoc3RvcmVkUmVzdGF1cmFudCkgPT4ge1xyXG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgc3RvcmVkUmVzdGF1cmFudCk7XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gLyoqXHJcbiAgKiBAZGVzY3JpcHRpb24gIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSB0eXBlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICogQGNvbnN0cnVjdG9yXHJcbiAgKiBAcGFyYW0ge3N0cmluZ30gY3Vpc2luZSAtIE5laWdoYm9yaG9vZCBzZWxlY3RlZC5cclxuICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lKGN1aXNpbmUsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHMgIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gY3Vpc2luZSB0eXBlXHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHJlc3RhdXJhbnRzLmZpbHRlcihyID0+IHIuY3Vpc2luZV90eXBlID09IGN1aXNpbmUpO1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuIC8qKlxyXG4gICogQGRlc2NyaXB0aW9uICBGZXRjaCByZXN0YXVyYW50cyBieSBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAqIEBjb25zdHJ1Y3RvclxyXG4gICogQHBhcmFtIHtzdHJpbmd9IG5laWdoYm9yaG9vZCAtIE5laWdoYm9yaG9vZCBzZWxlY3RlZC5cclxuICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlOZWlnaGJvcmhvb2QobmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gbmVpZ2hib3Job29kXHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHJlc3RhdXJhbnRzLmZpbHRlcihyID0+IHIubmVpZ2hib3Job29kID09IG5laWdoYm9yaG9vZCk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gLyoqXHJcbiAgKiBAZGVzY3JpcHRpb24gIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSBhbmQgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgKiBAY29uc3RydWN0b3JcclxuICAqIEBwYXJhbSB7c3RyaW5nfSBjdWlzaW5lIC0gQ3Vpc2luZSBzZWxlY3RlZC5cclxuICAqIEBwYXJhbSB7c3RyaW5nfSBuZWlnaGJvcmhvb2QgLSBOZWlnaGJvcmhvb2Qgc2VsZWN0ZWQuXHJcbiAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSByZXN0YXVyYW50cztcclxuICAgICAgICBpZiAoY3Vpc2luZSAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgY3Vpc2luZVxyXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZWlnaGJvcmhvb2QgIT0gJ2FsbCcpIHsgLy8gZmlsdGVyIGJ5IG5laWdoYm9yaG9vZFxyXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT0gbmVpZ2hib3Job29kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gLyoqXHJcbiAgKiBAZGVzY3JpcHRpb24gIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICogQGNvbnN0cnVjdG9yXHJcbiAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICovXHJcbiAgc3RhdGljIGZldGNoTmVpZ2hib3Job29kcyhjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEdldCBhbGwgbmVpZ2hib3Job29kcyBmcm9tIGFsbCByZXN0YXVyYW50c1xyXG4gICAgICAgIGNvbnN0IG5laWdoYm9yaG9vZHMgPSByZXN0YXVyYW50cy5tYXAoKHYsIGkpID0+IHJlc3RhdXJhbnRzW2ldLm5laWdoYm9yaG9vZClcclxuICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIG5laWdoYm9yaG9vZHNcclxuICAgICAgICBjb25zdCB1bmlxdWVOZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcy5maWx0ZXIoKHYsIGkpID0+IG5laWdoYm9yaG9vZHMuaW5kZXhPZih2KSA9PSBpKVxyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZU5laWdoYm9yaG9vZHMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuIC8qKlxyXG4gICogQGRlc2NyaXB0aW9uICBGZXRjaCBhbGwgY3Vpc2luZXMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgKiBAY29uc3RydWN0b3JcclxuICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgKi9cclxuICBzdGF0aWMgZmV0Y2hDdWlzaW5lcyhjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEdldCBhbGwgY3Vpc2luZXMgZnJvbSBhbGwgcmVzdGF1cmFudHNcclxuICAgICAgICBjb25zdCBjdWlzaW5lcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0uY3Vpc2luZV90eXBlKVxyXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gY3Vpc2luZXNcclxuICAgICAgICBjb25zdCB1bmlxdWVDdWlzaW5lcyA9IGN1aXNpbmVzLmZpbHRlcigodiwgaSkgPT4gY3Vpc2luZXMuaW5kZXhPZih2KSA9PSBpKVxyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZUN1aXNpbmVzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIC8qKlxyXG4gICogQGRlc2NyaXB0aW9uICBGZXRjaCBhbGwgcmV2aWV3cy5cclxuICAqIEBjb25zdHJ1Y3RvclxyXG4gICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbi5cclxuICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJldmlld3MoY2FsbGJhY2spIHtcclxuICAgIGZldGNoKERCSGVscGVyLlJFVklFV1NfVVJMKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgIC50aGVuKHJldmlld3MgPT4ge1xyXG4gICAgICAgIERCSGVscGVyLnN0b3JlSW5kZXhlZERCKElEQl9SRVZJRVdTLCByZXZpZXdzKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXZpZXdzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBEQkhlbHBlci5nZXRTdG9yZWRPYmplY3RzKElEQl9SRVZJRVdTKVxyXG4gICAgICAgIC50aGVuKChzdG9yZWRSZXZpZXdzKSA9PiB7XHJcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCBzdG9yZWRSZXZpZXdzKTtcclxuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQGRlc2NyaXB0aW9uICBGZXRjaCBhIHJldmlldyBieSBpdHMgSUQuXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIHtpbnR9IGlkIC0gUmV2aWV3cyBpZGVudGlmaWVyLlxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgICovXHJcbiAgIHN0YXRpYyBmZXRjaFJldmlld3NCeUlkKGlkLCBjYWxsYmFjaykge1xyXG4gICAgIGZldGNoKGAke0RCSGVscGVyLlJFVklFV1NfVVJMfS8ke2lkfWApXHJcbiAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAudGhlbihyZXZpZXcgPT4ge1xyXG4gICAgICAgICBEQkhlbHBlci5zdG9yZUluZGV4ZWREQihJREJfUkVWSUVXUywgcmV2aWV3KTtcclxuICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmV2aWV3KVxyXG4gICAgICAgfSlcclxuICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgIERCSGVscGVyLmdldFN0b3JlZE9iamVjdEJ5SWQoSURCX1JFVklFV1MsICdieS1pZCcsIGlkKVxyXG4gICAgICAgICAudGhlbigoc3RvcmVkUmV2aWV3KSA9PiB7XHJcbiAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgc3RvcmVkUmV2aWV3KTtcclxuICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgICAgfSlcclxuICAgICAgIH0pO1xyXG4gICB9XHJcblxyXG5cclxuIC8qKlxyXG4gICogQGRlc2NyaXB0aW9uICBGZXRjaCBhbGwgcmVzdGF1cmFudCByZXZpZXdzIGJ5IHJlc3RhdXJhbnQgSUQuXHJcbiAgKiBAY29uc3RydWN0b3JcclxuICAqIEBwYXJhbSB7aW50fSBpZCAtIFJlc3RhdXJhbnQgaWRlbnRpZmllci5cclxuICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXZpZXdzQnlSZXN0SWQoaWQsIGNhbGxiYWNrKSB7XHJcbiAgICBmZXRjaChgJHtEQkhlbHBlci5SRVZJRVdTX1VSTH0vP3Jlc3RhdXJhbnRfaWQ9JHtpZH1gKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgIC50aGVuKHJldmlld3MgPT4ge1xyXG4gICAgICAgIERCSGVscGVyLnN0b3JlSW5kZXhlZERCKElEQl9SRVZJRVdTLCByZXZpZXdzKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXZpZXdzKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIERCSGVscGVyLmdldFN0b3JlZE9iamVjdEJ5SWQoSURCX1JFVklFV1MsICdieS1yZXN0YXVyYW50LWlkJywgaWQpXHJcbiAgICAgICAgLnRoZW4oKHN0b3JlZFJldmlld3MpID0+IHtcclxuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHN0b3JlZFJldmlld3MpO1xyXG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAZGVzY3JpcHRpb24gIFNlbmQgcmV2aWV3IHRvIHNlcnZlciBhbmQgc3RvcmVzIGl0IGF0IGRhdGFiYXNlLlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByZXZpZXcgLSBSZXZpd2Ugb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgICovXHJcbiAgc3RhdGljIHBvc3RSZXZpZXcocmV2aWV3LCBjYWxsYmFjaykge1xyXG4gICAgZmV0Y2goREJIZWxwZXIuUkVWSUVXU19VUkwsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6J3Bvc3QnLFxyXG4gICAgICAgIGJvZHk6cmV2aWV3XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgLnRoZW4ocmV2aWV3ID0+IHtcclxuICAgICAgICBEQkhlbHBlci5zdG9yZUluZGV4ZWREQihJREJfUkVWSUVXUywgcmV2aWV3KTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXZpZXcpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIC8vRXJyb3Igc2VuZGluZyByZXZpZXcgdG8gc2VydmVyLlxyXG4gICAgICAgIERCSGVscGVyLnRhZ05hbWUgPSAncmV2aWV3JztcclxuICAgICAgICBEQkhlbHBlci5hZGRTeW5jU2VydmljZVdvcmtlcigpO1xyXG4gICAgICAgIERCSGVscGVyLnN0b3JlSW5kZXhlZERCKElEQl9QRU5ESU5HX1JFVklFV1MsIEpTT04ucGFyc2UocmV2aWV3KSk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmV2aWV3KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQGRlc2NyaXB0aW9uICBTZW5kIHJlcXVlc3QgZmF2b3JpdGUvdW5mYXZvcml0ZSB0byBzZXJ2ZXIgYW5kIGNoYW5nZXMgYXQgZGF0YWJhc2UuXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIHtpbnR9IGlkIC0gUmVzdGF1cmFudCBpZGVudGlmaWVyLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmF2b3JpdGUgLSBUcnVlIHRvIG1hcmsgYXMgZmF2b3JpdGUsIG90aGVyd2lzZSBmYWxzZS5cclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBwdXRGYXZvcml0ZShpZCwgZmF2b3JpdGUsIGNhbGxiYWNrKSB7XHJcbiAgICBmZXRjaChgJHtEQkhlbHBlci5SRVNUQVVSQU5UU19VUkx9LyR7aWR9Lz9pc19mYXZvcml0ZT0ke2Zhdm9yaXRlfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6J3B1dCcsXHJcbiAgICAgICAgYm9keTpmYXZvcml0ZVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgIC50aGVuKGZhdm9yaXRlID0+IHtcclxuICAgICAgICBEQkhlbHBlci5zdG9yZUluZGV4ZWREQihJREJfUkVTVEFVUkFOVFMsIGZhdm9yaXRlKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCBmYXZvcml0ZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgLy9FcnJvciBzZW5kaW5nIGZhdm9yaXRlL3VuZmF2b3JpdGUgdG8gc2VydmVyLlxyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIGZhdm9yaXRlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAvKipcclxuICAqIEBkZXNjcmlwdGlvbiAgUmVzdGF1cmFudCBwYWdlIFVSTC5cclxuICAqIEBjb25zdHJ1Y3RvclxyXG4gICogQHBhcmFtIHtvYmplY3R9IHJlc3RhdXJhbnQgLSBSZXN0YXVyYW50IGluZm9ybWF0aW9uLlxyXG4gICovXHJcbiAgc3RhdGljIHVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xyXG4gICAgcmV0dXJuIChgLi9yZXN0YXVyYW50Lmh0bWw/aWQ9JHtyZXN0YXVyYW50LmlkfWApO1xyXG4gIH1cclxuXHJcblxyXG4gLyoqXHJcbiAgKiBAZGVzY3JpcHRpb24gUmVzdGF1cmFudCBpbWFnZSBVUkwuXHJcbiAgKiBAY29uc3RydWN0b3JcclxuICAqIEBwYXJhbSB7b2JqZWN0fSByZXN0YXVyYW50IC0gUmVzdGF1cmFudCBpbmZvcm1hdGlvbi5cclxuICAqL1xyXG4gIHN0YXRpYyBpbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xyXG4gICAgbGV0IHBob3RvZ3JhcGggPSAoJ3Bob3RvZ3JhcGgnIGluIHJlc3RhdXJhbnQpID8gcmVzdGF1cmFudC5waG90b2dyYXBoIDogcmVzdGF1cmFudC5pZDtcclxuICAgIHJldHVybiAoYC9kaXN0L2ltZy8ke3Bob3RvZ3JhcGh9YCk7XHJcbiAgfVxyXG5cclxuXHJcbiAvKipcclxuICAqIEBkZXNjcmlwdGlvbiBNYXAgbWFya2VyIGZvciBhIHJlc3RhdXJhbnQuXHJcbiAgKiBAY29uc3RydWN0b3JcclxuICAqIEBwYXJhbSB7b2JqZWN0fSByZXN0YXVyYW50IC0gUmVzdGF1cmFudCBjb29yZHMgYW5kIG5hbWUuXHJcbiAgKiBAcGFyYW0ge29iamVjdH0gbWFwIC0gR29vZ2xlIG1hcCBvYmplY3QuXHJcbiAgKi9cclxuICBzdGF0aWMgbWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBtYXApIHtcclxuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICBwb3NpdGlvbjogcmVzdGF1cmFudC5sYXRsbmcsXHJcbiAgICAgIHRpdGxlOiByZXN0YXVyYW50Lm5hbWUsXHJcbiAgICAgIHVybDogREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSxcclxuICAgICAgbWFwOiBtYXAsXHJcbiAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1B9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG1hcmtlcjtcclxuICB9XHJcblxyXG5cclxuIC8qKlxyXG4gICogQGRlc2NyaXB0aW9uIFJlZ2lzdGVyIFNlcnZpY2VXb3JrZXIuXHJcbiAgKiBAY29uc3RydWN0b3JcclxuICAqL1xyXG4gIHN0YXRpYyByZWdpc3RlclNlcnZpY2VXb3JrZXIoKSB7XHJcbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xyXG4gICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcignc3cuanMnKVxyXG4gICAgICAgIC50aGVuKChyZWcpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBTZXJ2aWNlIFdvcmtlciByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bC4gSXRzIHNjb3BlIGlzICR7cmVnLnNjb3BlfSBgKTtcclxuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBTZXJ2aWNlIFdvcmtlciByZWdpc3RyYXRpb24gZXJyb3I6ICR7ZXJyb3J9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZGVzY3JpcHRpb24gUmVnaXN0ZXIgU2VydmljZVdvcmtlci5cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKi9cclxuICAgc3RhdGljIGFkZFN5bmNTZXJ2aWNlV29ya2VyKCkge1xyXG4gICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5LnRoZW4oZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICByZWdpc3RyYXRpb24uc3luYy5yZWdpc3RlcihEQkhlbHBlci50YWdOYW1lKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhgUmVnaXN0cmF0aW9uICR7REJIZWxwZXIudGFnTmFtZX0gc3VjY2VlZGVkLmApO1xyXG4gICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFJlZ2lzdHJhdGlvbiAke0RCSGVscGVyLnRhZ05hbWV9IGZhaWxlZCFgKTtcclxuICAgICAgIH0pO1xyXG4gICAgIH0pO1xyXG4gICB9XHJcblxyXG5cclxuICAvKipcclxuICAgICogQGRlc2NyaXB0aW9uIFNob3cgb3IgaGlkZSBtZXNzYWdlIHdoZW4gU2VydmljZSBXb3JrZXIgaXMgb25saW5lIG8gb2ZmbGluZS5cclxuICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBvZmZsaW5lIC0gU3RyaW5nIGRldGVjdGVkLlxyXG4gICAgKiBAcGFyYW0ge2V2ZW50fSBldmVudCAtIEV2ZW50IGNhbGxlZFxyXG4gICAgKi9cclxuICAgIHN0YXRpYyBzaG93TWVzc2FnZSh0eXBlKSB7XHJcbiAgICAgIGxldCBtZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3LW1lc3NhZ2UnKTtcclxuICAgICAgc3dpdGNoKHR5cGUpIHtcclxuICAgICAgICBjYXNlICdvbmxpbmUnOlxyXG4gICAgICAgICAgbWVzc2FnZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnb2ZmbGluZSc6XHJcbiAgICAgICAgICBtZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBEQkhlbHBlcjtcclxuIiwiY29uc3QgREJIZWxwZXIgPSByZXF1aXJlKCcuL2RiaGVscGVyJyk7XG5sZXQgcmVzdGF1cmFudDtcbmxldCByZXZpZXdzO1xubGV0IGlzX2Zhdm9yaXRlO1xubGV0IG1hcDtcbmxldCBzdGF0aWNNYXAgPSBmYWxzZTtcbmNvbnN0IE1PTlRIID0ge1xuICAwOiAnSmFudWFyeScsXG4gIDE6ICdGZWJydWFyeScsXG4gIDI6ICdNYXJjaCcsXG4gIDM6ICdBcHJpbCcsXG4gIDQ6ICdNYXknLFxuICA1OiAnSnVuZScsXG4gIDY6ICdKdWx5JyxcbiAgNzogJ0F1Z3VzdCcsXG4gIDg6ICdTZXB0ZW1iZXInLFxuICA5OiAnT2N0b2JlcicsXG4gIDEwOiAnTm92ZW1iZXInLFxuICAxMTogJ0RlY2VtYmVyJ1xufTtcblxuLyoqXG4gICogQGRlc2NyaXB0aW9uIENhbGwgZnVuY3Rpb25zIHdoZW4gRE9NIGNvbnRlbnQgaXMgbG9hZGVkXG4gICogQGNvbnN0cnVjdG9yXG4gICogQHBhcmFtIHtzdHJpbmd9IERPTUNvbnRlbnRMb2FkZWQgLSBTdHJpbmcgZGV0ZWN0ZWQuXG4gICogQHBhcmFtIHtldmVudH0gZXZlbnQgLSBFdmVudCBjYWxsZWRcbiAgKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZXZlbnQpID0+IHtcbiAgREJIZWxwZXIucmVnaXN0ZXJTZXJ2aWNlV29ya2VyKCk7XG4gIERCSGVscGVyLm9wZW5JbmRleGVkREIoKTtcbiAgZXZlbnRMaXN0ZW5lclN1Ym1pdGVkUmV2aWV3KCk7XG59KTtcblxuXG4vKipcbiAgKiBAZGVzY3JpcHRpb24gQ2FsbCBmdW5jdGlvbnMgd2hlbiB3aW5kb3cgaXMgcmVzaXplZFxuICAqIEBjb25zdHJ1Y3RvclxuICAqIEBwYXJhbSB7c3RyaW5nfSByZXNpemUgLSBTdHJpbmcgZGV0ZWN0ZWQuXG4gICogQHBhcmFtIHtldmVudH0gZXZlbnQgLSBFdmVudCBjYWxsZWRcbiAgKi9cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoZXZlbnQpID0+e1xuICBpbml0TWFwKCk7XG59KTtcblxuXG4vKipcbiAgKiBAZGVzY3JpcHRpb24gQ2FsbCBmdW5jdGlvbnMgd2hlbiBzZXJ2aWNlIHdvcmtlciBpcyBvbmxpbmUuXG4gICogQGNvbnN0cnVjdG9yXG4gICogQHBhcmFtIHtzdHJpbmd9IG9ubGluZSAtIFN0cmluZyBkZXRlY3RlZC5cbiAgKiBAcGFyYW0ge2V2ZW50fSBldmVudCAtIEV2ZW50IGNhbGxlZFxuICAqL1xuIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLChldmVudCk9PntcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICBEQkhlbHBlci5zaG93TWVzc2FnZShldmVudC50eXBlKTtcbiB9KTtcblxuXG4gLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBDYWxsIGZ1bmN0aW9ucyB3aGVuIHNlcnZpY2Ugd29ya2VyIGlzIG9mZmxpbmUuXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2ZmbGluZSAtIFN0cmluZyBkZXRlY3RlZC5cbiAgICogQHBhcmFtIHtldmVudH0gZXZlbnQgLSBFdmVudCBjYWxsZWRcbiAgICovXG4gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLChldmVudCk9PntcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICBEQkhlbHBlci5zaG93TWVzc2FnZShldmVudC50eXBlKTtcbiB9KTtcblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAgRmV0Y2ggcmV2aWV3cyBieSByZXN0YXVyYW50IGlkIGFuZCBzZXQgdGhlaXIgSFRNTC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtvYmplY3R9IGVycm9yIC0gZXJyb3Igb2JqZWN0LlxuICogQHBhcmFtIHtvYmplY3R9IG5laWdoYm9yaG9vZHMgLSBuZWlnaGJvcmhvb2QgbGlzdC5cbiAqL1xuZmV0Y2hSZXZpZXdzQnlSZXN0SWQgPSAoaWQpID0+IHtcbiAgREJIZWxwZXIuZmV0Y2hSZXZpZXdzQnlSZXN0SWQoaWQsIChlcnJvciwgcmV2aWV3cykgPT4ge1xuICAgIHNlbGYucmV2aWV3cyA9IHJldmlld3M7XG4gICAgaWYgKCFyZXZpZXdzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsbFJldmlld3NIVE1MKCk7XG4gICAgfVxuICB9KTtcbn1cblxuXG4vKipcbiAgKiBAZGVzY3JpcHRpb24gR2V0IGN1cnJlbnQgcmVzdGF1cmFudCBmcm9tIHBhZ2UgVVJMLlxuICAqIEBjb25zdHJ1Y3RvclxuICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNhbGxiYWNrIC0gQ2FsbGJhY2sgcmV0dXJuZWQuXG4gICovXG5mZXRjaFJlc3RhdXJhbnRGcm9tVVJMID0gKGNhbGxiYWNrKSA9PiB7XG4gIGlmIChzZWxmLnJlc3RhdXJhbnQpIHsgLy8gcmVzdGF1cmFudCBhbHJlYWR5IGZldGNoZWQhXG4gICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KVxuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKTtcbiAgaWYgKCFpZCkgeyAvLyBubyBpZCBmb3VuZCBpbiBVUkxcbiAgICBlcnJvciA9ICdObyByZXN0YXVyYW50IGlkIGluIFVSTCdcbiAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlbGYucmVzdGF1cmFudCA9IHJlc3RhdXJhbnQ7XG4gICAgICBzZWxmLmlzX2Zhdm9yaXRlID0gKHJlc3RhdXJhbnQuaXNfZmF2b3JpdGUgPT0gJ3RydWUnKSA/IHRydWU6IGZhbHNlO2FkZEV2ZW50TGlzdGVuZXJcbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XG4gICAgfSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXN0YXVyYW50IC0gQWxsIHJlc3RhdXJhbnQgaW5mby5cbiAqL1xuZmlsbFJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LW5hbWUnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XG5cbiAgY29uc3QgZmF2b3JpdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmF2b3JpdGUnKTtcbiAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgbGluay5jbGFzc05hbWUgPSAnZmF2b3JpdGUnO1xuICBsaW5rLnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcbiAgbGluay5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgZXZlbnRMaXN0ZW5lckZhdm9yaXRlKGxpbmspO1xuXG4gIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG4gIHN2Zy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnc3ZnLWZhdicpO1xuICBzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywnMCAwIDU3NiA1MTInKTtcbiAgc3ZnLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5JywndGl0bGUgZGVzY3JpcHRpb24nKTtcblxuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBcInRpdGxlXCIpO1xuICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpdGxlJyk7XG5cbiAgY29uc3QgZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBcImRlc2NcIik7XG4gIGRlc2Muc2V0QXR0cmlidXRlKCdpZCcsICdkZXNjcmlwdGlvbicpO1xuICBkZXNjLmlubmVySFRNTCA9ICdGYXZvcml0ZSBpbWFnZSc7XG5cbiAgY29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuICBwYXRoLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCdwYXRoLWZhdicpO1xuICBwYXRoLnNldEF0dHJpYnV0ZSgncm9sZScsJ3ByZXNlbnRhdGlvbicpO1xuXG4gIGlmKCBzZWxmLmlzX2Zhdm9yaXRlICkge1xuICAgIGxpbmsudGl0bGUgPSAnUmVtb3ZlIGZhdm9yaXRlJztcbiAgICBsaW5rLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdSZW1vdmUgZmF2b3JpdGUnKTtcbiAgICBsaW5rLmRhdGFzZXQuZmF2b3JpdGUgPSAncmVtb3ZlJztcbiAgICB0aXRsZS5pbm5lckhUTUwgPSAnUmVtb3ZlIGZhdm9yaXRlJztcbiAgICBwYXRoLnNldEF0dHJpYnV0ZShcImRcIixcIk0yNTkuMyAxNy44TDE5NCAxNTAuMiA0Ny45IDE3MS41Yy0yNi4yIDMuOC0zNi43IDM2LjEtMTcuNyA1NC42bDEwNS43IDEwMy0yNSAxNDUuNWMtNC41IDI2LjMgMjMuMiA0NiA0Ni40IDMzLjdMMjg4IDQzOS42bDEzMC43IDY4LjdjMjMuMiAxMi4yIDUwLjktNy40IDQ2LjQtMzMuN2wtMjUtMTQ1LjUgMTA1LjctMTAzYzE5LTE4LjUgOC41LTUwLjgtMTcuNy01NC42TDM4MiAxNTAuMiAzMTYuNyAxNy44Yy0xMS43LTIzLjYtNDUuNi0yMy45LTU3LjQgMHpcIik7XG4gIH0gZWxzZSB7XG4gICAgbGluay50aXRsZSA9ICdBZGQgdG8gZmF2b3JpdGUnO1xuICAgIGxpbmsuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0FkZCB0byBmYXZvcml0ZScpO1xuICAgIGxpbmsuZGF0YXNldC5mYXZvcml0ZSA9ICdhZGQnO1xuICAgIHRpdGxlLmlubmVySFRNTCA9ICdBZGQgdG8gZmF2b3JpdGUnO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKFwiZFwiLFwiTTUyOC4xIDE3MS41TDM4MiAxNTAuMiAzMTYuNyAxNy44Yy0xMS43LTIzLjYtNDUuNi0yMy45LTU3LjQgMEwxOTQgMTUwLjIgNDcuOSAxNzEuNWMtMjYuMiAzLjgtMzYuNyAzNi4xLTE3LjcgNTQuNmwxMDUuNyAxMDMtMjUgMTQ1LjVjLTQuNSAyNi4zIDIzLjIgNDYgNDYuNCAzMy43TDI4OCA0MzkuNmwxMzAuNyA2OC43YzIzLjIgMTIuMiA1MC45LTcuNCA0Ni40LTMzLjdsLTI1LTE0NS41IDEwNS43LTEwM2MxOS0xOC41IDguNS01MC44LTE3LjctNTQuNnpNMzg4LjYgMzEyLjNsMjMuNyAxMzguNEwyODggMzg1LjRsLTEyNC4zIDY1LjMgMjMuNy0xMzguNC0xMDAuNi05OCAxMzktMjAuMiA2Mi4yLTEyNiA2Mi4yIDEyNiAxMzkgMjAuMi0xMDAuNiA5OHpcIik7XG4gIH1cblxuICBzdmcuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICBzdmcuYXBwZW5kQ2hpbGQoZGVzYyk7XG4gIHN2Zy5hcHBlbmRDaGlsZChwYXRoKTtcbiAgbGluay5hcHBlbmQoc3ZnKTtcbiAgZmF2b3JpdGUuYXBwZW5kKGxpbmspO1xuXG4gIGNvbnN0IGltZyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcbiAgY29uc3QgcGljdHVyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LXBpY3R1cmUnKTtcbiAgcGljdHVyZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xuICBwaWN0dXJlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5JywgYHJlc3RhdXJhbnQtaW1nYCk7XG4gIHBpY3R1cmUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2ltZycpO1xuXG4gIGNvbnN0IHNvdXJjZVNtYWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XG4gIHNvdXJjZVNtYWxsLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCAnKG1heC13aWR0aDo0ODBweCknKTtcbiAgc291cmNlU21hbGwuc2V0QXR0cmlidXRlKCdzcmNzZXQnLCBgJHtpbWd9LTM4MF9zbWFsbC5qcGdgKTtcbiAgcGljdHVyZS5hcHBlbmQoc291cmNlU21hbGwpO1xuXG4gIGNvbnN0IHNvdXJjZU1lZGl1bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xuICBzb3VyY2VNZWRpdW0uc2V0QXR0cmlidXRlKCdtZWRpYScsICcobWluLXdpZHRoOiA0ODBweCkgYW5kIChtYXgtd2lkdGg6IDk2MHB4KScpO1xuICBzb3VyY2VNZWRpdW0uc2V0QXR0cmlidXRlKCdzcmNzZXQnLCBgJHtpbWd9LTUxMl9tZWRpdW0uanBnYCk7XG4gIHBpY3R1cmUuYXBwZW5kKHNvdXJjZU1lZGl1bSk7XG5cbiAgY29uc3Qgc291cmNlTGFyZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcbiAgc291cmNlTGFyZ2Uuc2V0QXR0cmlidXRlKCdtZWRpYScsICcobWluLXdpZHRoOjk2MXB4KScpO1xuICBzb3VyY2VMYXJnZS5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsIGAke2ltZ30tODAwX2xhcmdlLmpwZ2ApO1xuICBwaWN0dXJlLmFwcGVuZChzb3VyY2VMYXJnZSk7XG5cbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcbiAgaW1hZ2UuYWx0ID0gYFBpY3R1cmUgb2YgJHtyZXN0YXVyYW50Lm5hbWV9IHJlc3RhdXJhbnRgO1xuICBpbWFnZS5zcmMgPSBgJHtpbWd9LTM4MF9zbWFsbC5qcGdgO1xuXG4gIHBpY3R1cmUuYXBwZW5kKGltYWdlKTtcblxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xuICBjdWlzaW5lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuY3Vpc2luZV90eXBlO1xuXG4gIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXG4gIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xuICAgIGZpbGxSZXN0YXVyYW50SG91cnNIVE1MKCk7XG4gIH1cblxuICBmZXRjaFJldmlld3NCeVJlc3RJZChyZXN0YXVyYW50LmlkKTtcbn1cblxuXG4vKipcbiAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAgKiBAY29uc3RydWN0b3JcbiAgKiBAcGFyYW0ge29iamVjdH0gb3BlcmF0aW5nSG91cnMgLSBBbGwgcmVzdGF1cmFudCBvcGVyYXRpbmcgaG91cnMuXG4gICovXG5maWxsUmVzdGF1cmFudEhvdXJzSFRNTCA9IChvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpID0+IHtcbiAgY29uc3QgaG91cnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1ob3VycycpO1xuICBmb3IgKGxldCBrZXkgaW4gb3BlcmF0aW5nSG91cnMpIHtcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICBkYXkuaW5uZXJIVE1MID0ga2V5O1xuICAgIHJvdy5hcHBlbmRDaGlsZChkYXkpO1xuXG4gICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgdGltZS5pbm5lckhUTUwgPSBvcGVyYXRpbmdIb3Vyc1trZXldO1xuICAgIHJvdy5hcHBlbmRDaGlsZCh0aW1lKTtcblxuICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdyk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXZpZXdzIC0gQWxsIHJldmlld3MgcmVsYXRlZCB0byBhIHJlc3RhdXJhbnQuXG4gKi9cbmZpbGxSZXZpZXdzSFRNTCA9IChyZXZpZXdzID0gc2VsZi5yZXZpZXdzKSA9PiB7XG5cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgZmV0Y2hSZXZpZXdzQnlSZXN0SWQoc2VsZi5yZXN0YXVyYW50LmlkKTtcbiAgfVxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICB0aXRsZS5pbm5lckhUTUwgPSAnJztcbiAgdGl0bGUuaW5uZXJIVE1MID0gJ1Jldmlld3MnO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gIGlmICghcmV2aWV3cykge1xuICAgIGNvbnN0IG5vUmV2aWV3cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vUmV2aWV3cyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xuICB1bC5pbm5lckhUTUwgPSAnJztcblxuICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcbiAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xuICB9KTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbn1cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtvYmplY3R9IHJldmlldyAtIE9uZSByZXZlaXcgZnJvbSBhIHJlc3RhdXJhbnQuXG4gKi9cbmNyZWF0ZVJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcbiAgbGkuYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbGV0IGZ1bGxEYXRlID0gbmV3IERhdGUocmV2aWV3LmNyZWF0ZWRBdCk7XG4gIGRhdGUuaW5uZXJIVE1MXHQ9IGAke01PTlRIW2Z1bGxEYXRlLmdldE1vbnRoKCldfSAke2Z1bGxEYXRlLmdldERhdGUoKX0sICR7ZnVsbERhdGUuZ2V0RnVsbFllYXIoKX1gO1xuICBsaS5hcHBlbmRDaGlsZChkYXRlKTtcblxuICBjb25zdCByYXRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YDtcbiAgbGkuYXBwZW5kQ2hpbGQocmF0aW5nKTtcblxuICBjb25zdCBjb21tZW50cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xuICBsaS5hcHBlbmRDaGlsZChjb21tZW50cyk7XG5cbiAgcmV0dXJuIGxpO1xufVxuXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzdGF1cmFudCAtIFJlc3RhdXJhbnQgaW5mb3JtYXRpb24uXG4gKi9cbmZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQ9c2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEdldCBhIHBhcmFtZXRlciBieSBuYW1lIGZyb20gcGFnZSBVUkwuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gcGFyYW1ldGVyIG5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSB1cmwgcmVxdWVzdGVkXG4gKi9cbmdldFBhcmFtZXRlckJ5TmFtZSA9IChuYW1lLCB1cmwpID0+IHtcbiAgaWYgKCF1cmwpXG4gICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbPyZdJHtuYW1lfSg9KFteJiNdKil8JnwjfCQpYCksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKCFyZXN1bHRzKVxuICAgIHJldHVybiBudWxsO1xuICBpZiAoIXJlc3VsdHNbMl0pXG4gICAgcmV0dXJuICcnO1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xufVxuXG4vKipcbiogQGRlc2NyaXB0aW9uICBEZXBlbmRzIG9mIHJlc29sdXRpb25zIGluaXRhbGl6ZSBpbWFnZSBtYXAgb3IgZ29vZ2xlIG1hcC5cbiogQGNvbnN0cnVjdG9yXG4qL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gIGlmKHdpbmRvdy5pbm5lcldpZHRoIDwgNjQxKSB7XG4gICAgdmFyIGdvb2dsZU1hcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcbiAgICBnb29nbGVNYXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkaXNwbGF5U3RhdGljTWFwKCk7XG4gICAgc2VsZi5zdGF0aWNNYXAgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHZhciBpbWFnZU1hcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0aWMtbWFwJyk7XG4gICAgaW1hZ2VNYXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkaXNwbGF5TWFwKCk7XG4gICAgc2VsZi5zdGF0aWNNYXAgPSBmYWxzZTtcbiAgfVxufVxuXG5cbi8qKlxuKiBAZGVzY3JpcHRpb24gIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiogQGNvbnN0cnVjdG9yXG4qL1xuZGlzcGxheU1hcCA9ICgpID0+IHtcbiAgaWYoc2VsZi5zdGF0aWNNYXAgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZ29vZ2xlTWFwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xuICAgICAgZ29vZ2xlTWFwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgc2VsZi5zdGF0aWNNYXAgPSBmYWxzZTtcblxuICAgICAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICB6b29tOiAxNixcbiAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm1hcCk7XG4gICAgfVxuICB9KTtcblxufVxuXG5cbi8qKlxuKiBAZGVzY3JpcHRpb24gIERpc3BsYXkgU3RhdGljIG1hcCBhdCBNb2JpbGUgcmVzb2x1dGlvbnMuXG4qIEBjb25zdHJ1Y3RvclxuKi9cbmRpc3BsYXlTdGF0aWNNYXAgPSAoKSA9PiB7XG4gIGlmKHNlbGYuc3RhdGljTWFwID09PSB0cnVlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgaW1hZ2VNYXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdGljLW1hcCcpO1xuICAgICAgaW1hZ2VNYXAuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcbiAgICAgIGltYWdlTWFwLnNldEF0dHJpYnV0ZSgnc3JjJyxgaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL3N0YXRpY21hcD9jZW50ZXI9JHtyZXN0YXVyYW50LmxhdGxuZy5sYXR9LCR7cmVzdGF1cmFudC5sYXRsbmcubG5nfSZzaXplPSR7d2luZG93LmlubmVyV2lkdGh9eDQwMCZmb3JtYXQ9anBnJm1hcHR5cGU9cm9hZG1hcCZtYXJrZXJzPWNvbG9yOnJlZHwke3Jlc3RhdXJhbnQubGF0bG5nLmxhdH0sJHtyZXN0YXVyYW50LmxhdGxuZy5sbmd9JmtleT1BSXphU3lDdHZ6M0JBVDUtWENobFpfZGh1VzNHQWdsSmVIa18yT3NgKTtcbiAgICAgIHNlbGYuc3RhdGljTWFwID0gdHJ1ZTtcbiAgICAgIGltYWdlTWFwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaW1hZ2VNYXAuc3R5bGUuZGlzcGxheSA9J25vbmUnO1xuICAgICAgICBkaXNwbGF5TWFwKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIENhbGxzIGNsaWNrIGV2ZW50IG9mIHN1Ym1pdGVkIGJ1dHRvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5ldmVudExpc3RlbmVyU3VibWl0ZWRSZXZpZXcgPSAoKSA9PiB7XG4gIGxldCBzdWJtaXRSZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0Jyk7XG4gIHN1Ym1pdFJldmlldy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBhbGVydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydCcpO1xuICAgIGFsZXJ0LmlubmVySFRNTCA9ICcnO1xuICAgIGFsZXJ0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgY29uc3Qgc3VjY2VzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWNjZXNzJyk7XG4gICAgc3VjY2Vzcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgbGV0IHJldmlldyA9IHtcbiAgICAgICdyZXN0YXVyYW50X2lkJzogc2VsZi5yZXN0YXVyYW50LmlkLFxuICAgICAgJ25hbWUnOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpLnZhbHVlLFxuICAgICAgJ3JhdGluZyc6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyYXRpbmcnKS52YWx1ZSxcbiAgICAgICdjb21tZW50cyc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXcnKS52YWx1ZSxcbiAgICAgICdjcmVhdGVkQXQnOiBEYXRlLm5vdygpLFxuICAgICAgJ3VwZGF0ZWRBdCc6IERhdGUubm93KClcbiAgICB9XG5cbiAgICBpZiAodmFsaWRhdGVGb3JtKHJldmlldykpIHtcbiAgICAgIHNlbmRSZXZpZXcocmV2aWV3LCBlKTtcbiAgICAgIHN1Y2Nlc3Muc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cbiAgfSk7XG59XG5cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gVmFsaWRhdGUgcmV2aWV3IGZvcm0uXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFsaWRhdGVGb3JtID0gKHJldmlldykgPT4ge1xuICAvL0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkLlxuICBsZXQgbmFtZSA9IHJldmlldy5uYW1lO1xuICBsZXQgcmF0aW5nID0gcmV2aWV3LnJhdGluZztcbiAgbGV0IGNvbW1lbnQgPSByZXZpZXcucmV2aWV3O1xuICBsZXQgaXNWYWxpZCA9IHRydWU7XG4gIGNvbnN0IGFsZXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsZXJ0Jyk7XG4gIGFsZXJ0LmlubmVySFRNTCA9ICcnO1xuICBsZXQgYVRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBhVGl0bGUuaW5uZXJIVE1MID0gJ1BsZWFzZSBmaWxsIHJlcXVpcmVkIGZpZWxkczonO1xuICBhbGVydC5hcHBlbmRDaGlsZChhVGl0bGUpO1xuXG4gIGlmKCBuYW1lID09IFwiXCIgKSB7XG4gICAgaXNWYWxpZCA9ZmFsc2U7XG4gICAgbGV0IGFOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGFOYW1lLmlubmVySFRNTCA9ICcqIE5hbWUgaXMgcmVxdWlyZWQuJztcbiAgICBhbGVydC5hcHBlbmRDaGlsZChhTmFtZSk7XG4gIH1cbiAgaWYoIHJhdGluZyA9PSBcIlwiICkge1xuICAgIGlzVmFsaWQgPWZhbHNlO1xuICAgIGxldCBhUmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGFSYXRpbmcuaW5uZXJIVE1MID0gJyogUmV2aWV3IGlzIHJlcXVpcmVkJztcbiAgICBhbGVydC5hcHBlbmRDaGlsZChhUmF0aW5nKTtcbiAgfVxuICBpZiggY29tbWVudCA9PSBcIlwiICkge1xuICAgIGlzVmFsaWQgPWZhbHNlO1xuICAgIGxldCBhUmV2aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGFSZXZpZXcuaW5uZXJIVE1MID0gJyogUmF0aW5nIGlzIHJlcXVpcmVkJztcbiAgICBhbGVydC5hcHBlbmRDaGlsZChhUmV2aWV3KTtcbiAgfVxuICByZXR1cm4gaXNWYWxpZDtcbn1cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgYSBuZXcgcmV2aWV3XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7ZX0gZXJyb3IgIC0gRXJyb3IgaGFuZGxlLlxuICovXG5zZW5kUmV2aWV3ID0gKHJldmlldywgZSkgPT4ge1xuICBEQkhlbHBlci5wb3N0UmV2aWV3KEpTT04uc3RyaW5naWZ5KHJldmlldyksIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLnJldmlld3MucHVzaChyZXZpZXcpO1xuICAgIGZpbGxSZXZpZXdzSFRNTCgpO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDYWxscyBjbGljayBldmVudCBvZiBmYXZvcml0ZS91bmZhdm9yaXRlIGJ1dHRvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtvYmplY3R9IGxpbmsgIC0gTGluayB0byBhZGQgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICovXG5ldmVudExpc3RlbmVyRmF2b3JpdGUgPSAobGluaykgPT4ge1xuICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2VsZi5pc19mYXZvcml0ZSA9ICh0aGlzLmRhdGFzZXQuZmF2b3JpdGUgPT0gJ2FkZCcpID8gdHJ1ZSA6IGZhbHNlO1xuICAgIERCSGVscGVyLnB1dEZhdm9yaXRlKHNlbGYucmVzdGF1cmFudC5pZCwgc2VsZi5pc19mYXZvcml0ZSwgKGVycm9yLCByZXN1bHQpID0+IHtcbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWxmLnJlc3RhdXJhbnQuaXNfZmF2b3JpdGUgPSBzZWxmLmlzX2Zhdm9yaXRlID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgICAgIGlmKCBzZWxmLmlzX2Zhdm9yaXRlICkge1xuICAgICAgICBsaW5rLnRpdGxlID0gJ1JlbW92ZSBmYXZvcml0ZSc7XG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1JlbW92ZSBmYXZvcml0ZScpO1xuICAgICAgICBsaW5rLmRhdGFzZXQuZmF2b3JpdGUgPSAncmVtb3ZlJztcbiAgICAgICAgbGluay5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGl0bGUnKVswXS5pbm5lckhUTUwgPSAnUmVtb3ZlIGZhdm9yaXRlJztcbiAgICAgICAgbGluay5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGF0aCcpWzBdLnNldEF0dHJpYnV0ZShcImRcIixcIk0yNTkuMyAxNy44TDE5NCAxNTAuMiA0Ny45IDE3MS41Yy0yNi4yIDMuOC0zNi43IDM2LjEtMTcuNyA1NC42bDEwNS43IDEwMy0yNSAxNDUuNWMtNC41IDI2LjMgMjMuMiA0NiA0Ni40IDMzLjdMMjg4IDQzOS42bDEzMC43IDY4LjdjMjMuMiAxMi4yIDUwLjktNy40IDQ2LjQtMzMuN2wtMjUtMTQ1LjUgMTA1LjctMTAzYzE5LTE4LjUgOC41LTUwLjgtMTcuNy01NC42TDM4MiAxNTAuMiAzMTYuNyAxNy44Yy0xMS43LTIzLjYtNDUuNi0yMy45LTU3LjQgMHpcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5rLnRpdGxlID0gJ0FkZCB0byBmYXZvcml0ZSc7XG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0FkZCB0byBmYXZvcml0ZScpO1xuICAgICAgICBsaW5rLmRhdGFzZXQuZmF2b3JpdGUgPSAnYWRkJztcbiAgICAgICAgbGluay5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGl0bGUnKVswXS5pbm5lckhUTUwgPSAnQWRkIHRvIGZhdm9yaXRlJztcbiAgICAgICAgbGluay5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGF0aCcpWzBdLnNldEF0dHJpYnV0ZShcImRcIixcIk01MjguMSAxNzEuNUwzODIgMTUwLjIgMzE2LjcgMTcuOGMtMTEuNy0yMy42LTQ1LjYtMjMuOS01Ny40IDBMMTk0IDE1MC4yIDQ3LjkgMTcxLjVjLTI2LjIgMy44LTM2LjcgMzYuMS0xNy43IDU0LjZsMTA1LjcgMTAzLTI1IDE0NS41Yy00LjUgMjYuMyAyMy4yIDQ2IDQ2LjQgMzMuN0wyODggNDM5LjZsMTMwLjcgNjguN2MyMy4yIDEyLjIgNTAuOS03LjQgNDYuNC0zMy43bC0yNS0xNDUuNSAxMDUuNy0xMDNjMTktMTguNSA4LjUtNTAuOC0xNy43LTU0LjZ6TTM4OC42IDMxMi4zbDIzLjcgMTM4LjRMMjg4IDM4NS40bC0xMjQuMyA2NS4zIDIzLjctMTM4LjQtMTAwLjYtOTggMTM5LTIwLjIgNjIuMi0xMjYgNjIuMiAxMjYgMTM5IDIwLjItMTAwLjYgOTh6XCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cbiJdfQ=="}